<div class="tab" ng-controller="StatisticsCtrl">
    <div class="box">
        <div class="col-xs-1 panel panel-default namePanel">
            <div class="panel-heading ">
                <h3 class="panel-title h2">Статистика</h3>
            </div>
            <div class="panel-body">
                <div class="list-group  objects-select">
                    <a ng-repeat="statistic in statistics track by $index" ng-class="{active: isSelected(statistic.name)}" href="#" ng-click="selectStatistic($index)" class="list-group-item">{{statistic.name}}</a>
                </div>
            </div>
            <div class="panel-footer">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Название..." ng-model="newStatisticName">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" ng-click="addStatistic()">+</button>
                    </span>
                </div>
            </div>
        </div>
        <div class="panel panel-default detailsPanel ">
            <div class="panel-heading ">
                <h3 class="panel-title">Детали статистики</h3>
                {{selectedStatistic.name}}
            </div>
            <div class="panel-body" ng-show="selectedStatistic">
                <div ng-repeat="addedObject in getAddedObjects()" class="panel panel-default">
                    <div class="panel-body stat-object">
                        <h4>{{addedObject.name}}</h4>

                        <ul class="list-group">
                            <li ng-repeat="attr in getAddedAttrs(addedObject.name)" class="list-group-item">
                                {{attr.name}}
                                <span ng-click="removeAttr(addedObject.name, attr.name)" class="badge">x</span>
                            </li>
                        </ul>
                        <div class="btn-group">
                            <div class="dropdown attrDropup" ng-click="initDropdowns()">
                                <button class="btn btn-default dropdown-toggle" type="button" id="" data-toggle="dropdown">
                                    <span>Добавить атрибут</span>
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                                    <li role="presentation" ng-repeat="attr in getUnaddedAttrs(addedObject.name)">
                                        <a role="menuitem" ng-click="addAttr(addedObject.name, attr.name)" tabindex="-1" href="#">
                                                    {{attr.name}}
                                                </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="btn-group">
                    <div class="dropdown objDropup">
                        <button class="btn btn-default dropdown-toggle" type="button" id="" data-toggle="dropdown">
                            <span>Добавить объект</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                            <li role="presentation" ng-repeat="unaddedObject in getUnaddedObjects()">
                                <a role="menuitem" ng-click="addObject(unaddedObject.name)" tabindex="-1" href="#">
                                            {{unaddedObject.name}}
                                        </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
